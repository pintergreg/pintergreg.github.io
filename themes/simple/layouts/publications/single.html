{{ partial "header.html" . }}
{{ partial "nav.html" . }}

{{ $.Scratch.Set "foo" (dict ) }}
{{ $.Scratch.SetInMap "foo" "appricot" 4 }}
{{/* $.Scratch.Get "foo"*/}}

<div class="container pb-5">

{{ $.Scratch.Set "last_year" 3000 }}
    {{- range (sort $.Site.Data.publications_bibjson.records "year" "desc") -}}
    {{- if lt .year ($.Scratch.Get "last_year") }}
    <div class="border-bottom">
        <div class="text-end mt-3">{{.year}}</div>
    </div>
    {{ $.Scratch.Set "last_year" .year }}
    {{- end }}
    <section class="mt-3">
        {{/*<h3>{{ (index (index (index .issued "date-parts") 0) 0) }}</h3>*/}}
        <h2 class="fs-5">{{ .title }}</h2>
        <div>{{ delimit (partial "restructure_names.func" .author) ", " }}</div>
        {{- if eq .type "article" }}
        <div>{{.journal.name}} {{.year}}, {{.journal.volume}}({{.journal.number}}), {{.journal.pages}}; {{.doi}}</div>
        {{- end -}}
        {{- if eq .type "inproceedings" }}
        <div>{{.booktitle}}</div>
        {{- end -}}
    </section>
    {{- end -}}
</div>
{{ partial "footer.html" . }}
